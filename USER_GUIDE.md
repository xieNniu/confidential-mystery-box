# 📖 用户使用手册

## 欢迎使用机密盲盒系统！

这是一个基于 Zama FHEVM 技术的完全加密盲盒系统，让您可以：
- 🎁 购买神秘盲盒
- 🔐 完全加密的奖品金额
- 💰 开盒后自动获得 ETH 奖品
- 🛡️ 隐私保护的游戏体验

---

## 🚀 快速开始

### 1. 准备工作

#### 安装 MetaMask
1. 访问 [MetaMask 官网](https://metamask.io/)
2. 下载并安装浏览器插件
3. 创建或导入钱包

#### 获取测试币
1. 访问 [Sepolia 水龙头](https://sepoliafaucet.com/)
2. 输入您的钱包地址
3. 领取测试 ETH（免费）

### 2. 连接钱包

1. 打开应用
2. 点击右上角 **"连接钱包"**
3. 在 MetaMask 弹窗中确认连接
4. 如果提示"错误的网络"，点击 **"切换到 Sepolia"**

---

## 🏪 购买盲盒

### 步骤

1. 点击顶部 **"盲盒商店"** 标签
2. 浏览可用的盲盒系列
3. 查看每个系列的信息：
   - 💰 **价格**: 购买一个盲盒需要多少 ETH
   - 📦 **剩余数量**: 还有多少盲盒可购买
4. 点击 **"立即购买"** 按钮
5. 在 MetaMask 弹窗中确认交易
6. 等待交易确认（约 10-30 秒）
7. 购买成功！盲盒已添加到您的账户

### 注意事项

- ✅ 确保钱包余额足够支付盲盒价格
- ✅ 每次购买需要支付少量 Gas 费
- ⚠️ 盲盒售罄后无法购买
- ⚠️ 购买后无法退款

---

## 📦 管理我的盲盒

### 查看盲盒

1. 点击顶部 **"我的盲盒"** 标签
2. 您会看到两个部分：
   - **未开启的盲盒**: 您购买但还没开启的盲盒
   - **已开启的盲盒**: 您已经开启并知道奖品的盲盒

### 开启盲盒

1. 在"未开启的盲盒"部分找到您想开启的盲盒
2. 点击 **"开启盲盒"** 按钮
3. 在 MetaMask 中确认交易
4. 等待开盒...

#### FHE 模式（加密模式）
- ⏱️ 需要等待 5-15 秒
- 🔐 系统正在安全解密您的奖品
- 📊 页面会自动刷新显示结果

#### 明文模式（Fallback）
- ⚡ 立即显示结果
- 📋 用于测试或 Gateway 离线时

### 领取奖品

1. 开盒成功后，在"已开启的盲盒"部分
2. 您会看到 **奖品金额**（ETH）
3. 点击 **"领取奖品"** 按钮
4. 在 MetaMask 中确认交易
5. ETH 会自动转入您的钱包！

---

## ⚙️ 管理员功能

> 仅合约部署者可以访问

### 创建盲盒系列

1. 点击顶部 **"管理面板"** 标签
2. 在"创建盲盒系列"卡片中填写：
   - **系列名称**: 例如"新春盲盒"
   - **盲盒价格**: 单个盲盒的价格（ETH）
   - **盲盒数量**: 本系列总共多少个盲盒
3. 点击 **"创建系列"** 按钮
4. 在 MetaMask 中确认交易
5. 创建成功！用户现在可以购买了

### 为合约充值

**重要**: 创建系列前必须为合约充值！

1. 在"为合约充值"卡片中
2. 输入充值金额（ETH）
3. 点击 **"充值"** 按钮
4. 在 MetaMask 中确认交易

💡 **建议充值金额** = 盲盒价格 × 盲盒数量 × 1.2

例如：
- 盲盒价格：0.01 ETH
- 盲盒数量：100 个
- 建议充值：0.01 × 100 × 1.2 = 1.2 ETH

---

## 🔄 系统模式说明

### 自动模式（推荐）

系统会自动检测 Zama Gateway 状态：

- 🟢 **Gateway 在线** → 自动使用 **FHE 加密模式**
  - 奖品完全加密
  - 隐私保护
  - 需要 5-15 秒解密

- 🔴 **Gateway 离线** → 自动切换到 **明文模式**
  - 快速测试
  - 立即结果
  - 无加密保护

### 手动模式

点击 Gateway 状态卡片中的 **"自动模式"** 按钮可切换到手动模式：
- 手动选择使用哪种合约
- 适合开发测试
- 不受 Gateway 状态影响

---

## ❓ 常见问题

### Q1: 为什么我看不到奖品金额？

**未开启的盲盒**:
- 奖品是加密的，开启后才能看到

**已开启的盲盒（FHE 模式）**:
- 需要等待 5-15 秒解密
- 刷新页面查看

### Q2: 交易一直在 Pending？

1. 检查 MetaMask 交易状态
2. Gas 价格可能太低，可以加速交易
3. 等待区块确认（Sepolia 约 15 秒一个块）

### Q3: 为什么显示"Gateway 离线"？

- Zama Gateway 正在维护
- 系统会自动切换到明文模式
- 您仍然可以正常使用（但无加密保护）
- 查看状态：https://status.zama.ai/

### Q4: 开盒后余额没增加？

1. 检查是否点击了 **"领取奖品"**
2. 等待领取交易确认
3. 刷新 MetaMask 查看余额

### Q5: 能取消已购买的盲盒吗？

**不能**。购买后无法退款，请谨慎购买。

### Q6: 盲盒的奖品是随机的吗？

**是的**：
- 每个盲盒的奖品金额是购买时随机生成的
- 金额范围：盲盒价格的 50% - 150%
- 完全随机，公平公正

### Q7: FHE 模式和明文模式有什么区别？

| 特性 | FHE 模式 | 明文模式 |
|------|---------|---------|
| 隐私保护 | ✅ 完全加密 | ❌ 无加密 |
| 解密速度 | ⏱️ 5-15秒 | ⚡ 立即 |
| 依赖 Gateway | ✅ 需要 | ❌ 不需要 |
| 适用场景 | 生产环境 | 测试/Fallback |

---

## 💡 使用技巧

### 技巧 1: 查看历史
MetaMask 的 Activity 标签可以查看所有交易历史

### 技巧 2: 批量购买
可以多次点击购买来获得多个盲盒

### 技巧 3: 计算收益
- 成本 = 购买价格 + Gas 费
- 收益 = 奖品金额 - 成本
- 运气好可以盈利！

### 技巧 4: 最佳购买时机
- 系列刚创建时盲盒最多
- 接近售罄时剩余盲盒可能有更好的奖励

---

## 🔒 安全提示

### 保护您的钱包
- ⚠️ **永远不要分享私钥**
- ⚠️ **永远不要分享助记词**
- ⚠️ 只在官方网站连接钱包
- ⚠️ 定期备份钱包

### 谨慎交易
- ✅ 仔细检查交易详情
- ✅ 确认接收地址
- ✅ 注意 Gas 费用
- ✅ 不要盲目确认弹窗

### 识别钓鱼
- ❌ 不要点击可疑链接
- ❌ 不要在未知网站连接钱包
- ❌ 不要相信"免费赠送"骗局

---

## 📞 获取帮助

### 技术支持
- 查看 README.md
- 查看 DEVELOPMENT_GUIDE.md
- 提交 GitHub Issue

### 社区资源
- [Zama Discord](https://discord.gg/zama)
- [Zama 文档](https://docs.zama.ai/)
- [Developer Program](https://www.zama.ai/programs/developer-program)

---

## 🎉 开始体验

现在您已经了解了所有功能，是时候：

1. 🔗 连接钱包
2. 🏪 浏览盲盒商店
3. 🎁 购买您的第一个盲盒
4. 🎲 开盒获得惊喜！

**祝您好运！** 🍀✨

---

*本应用基于 Zama FHEVM 技术构建，参加 Zama Developer Program。*


